# ESP32 DSSS実験プログラム

このプログラムは、Direct Sequence Spread Spectrum (DSSS)の基本的な動作を実験的に確認するためのテストコードです。

## 実験の目的

1. DSSの基本原理の理解
2. スペクトラム拡散の効果の確認
3. 信号品質（SNR）の測定

## ハードウェア要件

- ESP32開発ボード
- GPIO36 (ADC1_CH0)にノイズ入力用の回路を接続
- GPIO25 (DAC1)に出力信号測定用のオシロスコープを接続

## 実験回路図

```mermaid
graph LR
    A[ESP32] --> B[DAC出力<br>GPIO25]
    B --> C[オシロスコープ]
    D[ノイズ源] --> E[ADC入力<br>GPIO36]
    E --> A
```

## プログラムの機能

### 1. データ生成
- ランダムな2値データ（-1, 1）を生成
- サンプリングレート: 1000 Hz

### 2. スペクトラム拡散
- 11-bit Barkerコードを使用
- チップレート: 11000 Hz

### 3. 信号品質測定
- 信号電力の測定
- ノイズ電力の測定
- SNR計算

## 測定データの例

```
=== 信号品質測定 ===
信号電力: 1.00
ノイズ電力: 0.15
SNR: 8.24 dB
```

## 実験手順

1. ハードウェアのセットアップ
   - ESP32の接続
   - 測定機器の接続

2. プログラムの書き込み
   ```bash
   pio run -t upload
   ```

3. シリアルモニタの起動
   ```bash
   pio device monitor
   ```

4. 測定と観察
   - オシロスコープで拡散信号を観察
   - SNRの変化を記録

## 実験のポイント

1. スペクトラム拡散前後の信号
   - 時間領域での変化
   - 周波数領域での変化

2. ノイズの影響
   - 異なるノイズレベルでのSNR変化
   - 復調性能への影響

3. Barkerコードの効果
   - 自己相関特性
   - 干渉耐性

## トラブルシューティング

1. 信号が観測できない場合
   - DACピンの接続を確認
   - オシロスコープの設定を確認

2. ノイズ測定の問題
   - ADCピンの接続を確認
   - アッテネータ設定を確認

3. SNRが異常な値を示す場合
   - ノイズ源の電圧レベルを確認
   - ADCの飽和を確認

## 注意事項

- 高速なサンプリングを行うため、他の処理は最小限に
- 電源ノイズの影響を考慮した配線を行う
- 測定機器の入力インピーダンスに注意 